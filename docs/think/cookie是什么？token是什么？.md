# Cookie是什么？token又是什么？

在现代互联网世界中，Cookie 和 Token 是两个广泛用于用户认证和授权的关键概念。尽管它们在某些方面有相似之处，但它们在工作原理和应用场景上有着明显的不同。本文将深入探讨 Cookie 和 Token 的概念、功能以及它们在现实中的应用。
	
    我们假设这么一个场景：
	
    你来到一个赌场，都是VIP客户，不和发牌的荷官直接接触，全都靠服务员在中间传递下注。
	
    当你第一次来的时候，你要下注1000时，喊来服务人员，帮你把下注传递到荷官那边去。由于服务员是流动的，不认识任何一个房间，所以服务员会记下你的房间号、姓名、下注金额。荷官接到你的下注后，就会问服务员你来自几号VIP房，姓甚名谁，并把询问的信息写到本子上，然后回复服务人员下注成功，并给服务人员一个类似门卡的东西，帮忙一起传递回去。
	
    当你再下注的时候，只需要附上金额和类似门卡的东西即可，这样荷官就会知道你输赢及本金还有多少。
	
    当你完累了，打算撤的时候，最后一次不需要给下注金额，而是直接把类似门卡的东西归还给服务员，让服务员帮忙还给荷官。荷官收到门卡后，就删除这个门卡附加的信息，并且告诉服务员：已成功退出。
	
    这个场景当中：
	
    “你”=客户端，
	
    “服务员”=浏览器，
	
    “荷官”=服务器，
	
    “类似门卡”=token
	
    客户端发起一个请求，浏览器会首先收到，并且把你的IP地址等信息记录到浏览器里面，这就是生成了一个cookie。
	
    接着浏览器会把请求转发给服务器，服务器收到后，同样会生成一个cookie给浏览器，并且绑定起来，同时为了能够快速验证客户端，同步发了一个token，让客户端每次发送请求的时候可以不用总带着账号密码等信息。
	
    当客户端发起退出时，服务器会销毁token。但大部分情况下，客户端很少发起退出，这个销毁机制一般都由token的保持机制决定的，例如每24H就需要重新验证。
## Cookie：相当于浏览器的“记事本”
	
Cookie 是一种小型文本文件，存储在用户的计算机或移动设备上，能够任务是由Web服务器发送给浏览器。它们通常包含一些文本数据，用于跟踪用户在网站上的活动。Cookie 的主要作用是在不同的HTTP请求之间保持状态信息，使网站能够识别和记住用户。

## Cookie 的特点：

- 持久性：Cookie 可以设置为会话Cookie（在浏览器关闭后删除）或持久Cookie（在一段时间内保持有效）。
- 域限制：Cookie 可以与特定域名相关联，以确保只有与该域相关的请求才会发送它们。
- 大小限制：每个域对Cookie 的数量和大小都有限制。
- 安全性：Cookie 可以设置为HTTP Only 和 Secure，以增强安全性。

Cookie的好处就在于，假设你每次下注来的都不是同一个服务员，当由于第一个服务员记下了你的信息，每次其他服务员为你服务的时候，就不需要再询问基础信息了。 

## Token：身份的代表

Token 是一种字符串，通常由服务器生成，并返回给客户端（通常是浏览器或移动应用）。它们是用户身份的代表，用于进行身份验证和授权。Token 可以包含有关用户身份、访问权限和其他相关信息的数据。

## Token 的特点：

- 无状态性：与 Cookie 不同，Token 不需要服务器存储用户状态信息，因此更适用于分布式系统和微服务架构。
- 可扩展性：Token 可以包含自定义数据，以满足不同应用程序的需求。
- 安全性：Token 可以通过加密和签名来保护其内容，确保其不会被篡改。
- 自包含性：Token 包含所有必要的信息，服务器无需访问数据库来验证用户身份。

在现实中token使用的例子非常多，例如当你登录到社交媒体应用或在线银行应用时，你通常会收到一个令牌，该令牌包含了关于你的身份和权限的信息。这个令牌会在每次请求中发送到服务器，以便服务器能够验证你的身份，并根据你的权限提供相应的服务。

## Cookie 和 Token 的关系

尽管 Cookie 和 Token 在功能和用途上有所重叠，但它们通常用于不同的方面。它们可以相互配合以实现更强大的用户身份验证和授权系统。

Token 可以存储在 Cookie 中：虽然 Token 通常存储在浏览器的内存中或本地存储中，但你也可以选择将 Token 存储在 Cookie 中，以便在每次请求时自动发送。

Cookie 可以用于跟踪 Token：在某些情况下，Cookie 可以用于跟踪用户的身份验证状态。当用户登录并收到 Token 后，可以将 Token 存储在 Cookie 中，以便在会话期间持续使用。

### Token 更安全：通常情况下，Token 更适合用于身份验证和授权，因为它们可以进行签名和加密，从而更难以被篡改。

Cookie 和 Token 在现代互联网应用中扮演着关键的角色。Cookie 用于跟踪用户状态和存储会话信息，而 Token 用于用户身份验证和授权。它们各自有其特定的应用场景和优势，但在某些情况下也可以结合使用，以实现更强大的身份管理系统。

::: tip
要充分理解 Cookie 和 Token 的关系，我们需要认识到它们在互联网生态系统中的不同作用，以便根据具体需求选择合适的解决方案。无论是网上购物还是社交媒体，Cookie 和 Token 都是构建现代互联网的不可或缺的组成部分，它们有助于提供更安全、更方便和更个性化的在线体验。
:::